import{V as u,a,b as c,j as o}from"./chunk-UK44HD3M.js";var m=class s{cartCountSource=new o(0);cartCount$=this.cartCountSource.asObservable();cartItems=[];cartItemsWithCounts=[];addToCart(e){this.cartItems.push(e),this.cartCountSource.next(this.cartItems.length)}getCartItems(){return this.cartItemsWithCounts=this.getCartItemsWithCount(this.cartItems),this.cartItemsWithCounts}removeItem(e){let t=this.cartItems.indexOf(e);t>-1&&(this.cartItems.splice(t,1),this.cartCountSource.next(this.cartItems.length))}updateQuantity(e,t){let r=this.cartItems.indexOf(e);r>-1&&(this.cartItems[r].quantity=t)}getCartItemQuantity(e){let t=this.cartItems.find(r=>r.id===e.id);return t?t.quantity:0}getTotalPrice(){return this.cartItems.reduce((e,t)=>e+t.price*t.quantity,0)}clearCart(){this.cartItems=[],this.cartCountSource.next(0)}getCartCount(){return this.cartItems.length}getCartItemsWithCount(e){let t=new Map,r=[];for(let i of e){let n=JSON.stringify(i);t.set(n,(t.get(n)||0)+1)}for(let i of e){let n=JSON.stringify(i);t.get(n)>0&&(r.push(c(a({},i),{count:t.get(n)})),t.delete(n))}return r}static \u0275fac=function(t){return new(t||s)};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};export{m as a};
